<!DOCTYPE html>
<html>
<head>
  <title>Fighting Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    /* Game container styles */
    .game-container {
      position: relative;
      width: 400px;
      height: 400px;
      border: 2px solid #333;
      background-color: #fff;
      margin: 0 auto;
    }

    /* Character styles */
    .character {
      position: absolute;
      width: 40px;
      height: 40px;
      transition: 0.2s;
    }

    /* Player 1 styles */
    #player1 {
      top: 50%;
      left: 10px;
      transform: translateY(-50%);
    }

    /* Touchscreen controls styles */
    .touch-controls {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-top: 20px;
    }

    .touch-button {
      width: 70px;
      height: 70px;
      background-color: #ADD8E6;
      border-radius: 50%;
      margin: 5px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 24px;
      font-weight: bold;
      cursor: pointer;
    }

    /* Color picker styles */
    .color-picker {
      margin-top: 20px;
    }

    .color-picker input {
      width: 100%;
      height: 30px;
      margin-top: 5px;
    }

    /* Game over screen styles */
    .game-over-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      color: red;
      font-size: 36px;
    }
  </style>
</head>
<body>
  <div class="game-container">
    <div id="player1" class="character"></div>
  </div>

  <div class="touch-controls">
    <!-- Touch buttons -->
    <div class="touch-button" id="move-up">&#x25B2;</div>
    <div class="touch-button" id="move-left">&#x25C0;</div>
    <div class="touch-button" id="move-right">&#x25B6;</div>
    <div class="touch-button" id="move-down">&#x25BC;</div>
    <div class="touch-button" id="move-up-left">&#x2196;</div>
    <div class="touch-button" id="move-up-right">&#x2197;</div>
    <div class="touch-button" id="move-down-left">&#x2199;</div>
    <div class="touch-button" id="move-down-right">&#x2198;</div>
  </div>

  <div class="color-picker">
    <label for="player-color">Player 1 Color:</label>
    <input type="color" id="player-color">
  </div>

  <div class="game-over-screen" id="game-over-screen">
    <p id="game-over-text">Game Over</p>
    <button id="restart-button">Restart</button>
  </div>

  <script>
    var player1 = document.getElementById("player1");
    var stepSize = 10;
    var gameContainer = document.querySelector(".game-container");
    var touchButtons = document.querySelectorAll(".touch-button");
    var gameOverScreen = document.getElementById("game-over-screen");
    var gameOverText = document.getElementById("game-over-text");
    var restartButton = document.getElementById("restart-button");

    // Set initial game state
    var isGameOver = false;

    // Keyboard Controls
    document.addEventListener("keydown", function(event) {
      moveCharacter(event.keyCode);
    });

    // Touchscreen Controls
    touchButtons.forEach(function(button) {
      button.addEventListener("touchstart", function(event) {
        event.preventDefault();
        var direction = button.getAttribute("data-direction");
        moveCharacter(direction);
      });
    });

    // Color picker
    var colorPicker = document.getElementById("player-color");
    colorPicker.addEventListener("input", function() {
      changePlayerColor(player1, colorPicker.value);
    });

    // Restart button
    restartButton.addEventListener("click", function() {
      resetGame();
    });

    function moveCharacter(direction) {
      if (!isGameOver) {
        // Player 1 Movement
        if (direction === "up") {
          moveUp(player1, stepSize);
        } else if (direction === "down") {
          moveDown(player1, stepSize);
        } else if (direction === "left") {
          moveLeft(player1, stepSize);
        } else if (direction === "right") {
          moveRight(player1, stepSize);
        } else if (direction === "up-left") {
          moveUpLeft(player1, stepSize);
        } else if (direction === "up-right") {
          moveUpRight(player1, stepSize);
        } else if (direction === "down-left") {
          moveDownLeft(player1, stepSize);
        } else if (direction === "down-right") {
          moveDownRight(player1, stepSize);
        }
      }
    }

    function moveUp(element, stepSize) {
      var topPos = parseInt(element.style.top) - stepSize;
      element.style.top = topPos + "px";
    }

    function moveDown(element, stepSize) {
      var topPos = parseInt(element.style.top) + stepSize;
      element.style.top = topPos + "px";
    }

    function moveLeft(element, stepSize) {
      var leftPos = parseInt(element.style.left) - stepSize;
      element.style.left = leftPos + "px";
    }

    function moveRight(element, stepSize) {
      var leftPos = parseInt(element.style.left) + stepSize;
      element.style.left = leftPos + "px";
    }

    function moveUpLeft(element, stepSize) {
      var topPos = parseInt(element.style.top) - stepSize;
      var leftPos = parseInt(element.style.left) - stepSize;
      element.style.top = topPos + "px";
      element.style.left = leftPos + "px";
    }

    function moveUpRight(element, stepSize) {
      var topPos = parseInt(element.style.top) - stepSize;
      var leftPos = parseInt(element.style.left) + stepSize;
      element.style.top = topPos + "px";
      element.style.left = leftPos + "px";
    }

    function moveDownLeft(element, stepSize) {
      var topPos = parseInt(element.style.top) + stepSize;
      var leftPos = parseInt(element.style.left) - stepSize;
      element.style.top = topPos + "px";
      element.style.left = leftPos + "px";
    }

    function moveDownRight(element, stepSize) {
      var topPos = parseInt(element.style.top) + stepSize;
      var leftPos = parseInt(element.style.left) + stepSize;
      element.style.top = topPos + "px";
      element.style.left = leftPos + "px";
    }

    function changePlayerColor(element, color) {
      element.style.backgroundColor = color;
    }

    function resetGame() {
      // Reset player positions
      player1.style.top = "50%";
      player1.style.left = "10px";

      // Reset player colors
      changePlayerColor(player1, colorPicker.value);

      // Hide game over screen
      gameOverScreen.style.display = "none";

      // Reset game state
      isGameOver = false;
    }

    function showGameOverScreen() {
      gameOverText.style.color = "red";
      gameOverScreen.style.display = "flex";
      isGameOver = true;
    }

    // Collision detection
    function checkCollision() {
      var player1Rect = player1.getBoundingClientRect();
      var gameContainerRect = gameContainer.getBoundingClientRect();

      if (
        player1Rect.right >= gameContainerRect.right ||
        player1Rect.left <= gameContainerRect.left ||
        player1Rect.top <= gameContainerRect.top ||
        player1Rect.bottom >= gameContainerRect.bottom
      ) {
        showGameOverScreen();
      }
    }

    // Game loop
    setInterval(checkCollision, 10);
  </script>
</body>
</html>
